<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" media="screen">
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        var index = streams.home.length - 1;
        while(index >= 0){
          displayTweet(index);
          index -= 1;
        }

        index = streams.home.length - 1;
        setInterval(showNewTweets, 100);
        
        function displayTweet(index) {
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');

            var $date = $('<span></span>');
            var $user = $('<span></span>');
            var $message = $('<span></span>');

            $date.text(tweet.created_at);
            $user.text(" @" + tweet.user);
            $message.text(": " + tweet.message); 

            $user.addClass("user");

            $date.appendTo($tweet);
            $user.appendTo($tweet);
            $message.appendTo($tweet);
            $tweet.prependTo($body);
        }

        function showNewTweets() {
          while(index < streams.home.length - 1){
            index++;
            displayTweet(index);
            $("div").last().remove();
          }          
        }
      });

    </script>
  </body>
</html>
